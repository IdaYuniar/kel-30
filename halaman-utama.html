<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vinix 7 — Asisten Digital (Gabungan Final)</title> 
    
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>

    <style>
        /* ========================================= */
        /* === BAGIAN CSS START (DITERIMA & SEDIKIT DIOPTIMALKAN) === */
        /* ========================================= */

        :root{
            --bg:#FFFFFF; 
            --card-bg:#F8F9FA; 
            --text-main:#333333; 
            --primary:#FFC300; 
            --accent:#1E5EAE; 
            --muted:#6c757d; 
            --delete-red: #dc3545; 
        }

        *{box-sizing:border-box}
        body{
            font-family:'Poppins',sans-serif;
            margin:0;
            background:var(--bg);
            color:var(--text-main);
        }
        .container{max-width:1100px;margin:32px auto;padding:24px}
        .muted{color:var(--muted);font-size:13px}
        .flex-1 { flex: 1; }

        /* HEADER DAN NAVIGASI UTAMA */
        header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
        .brand{display:flex;gap:12px;align-items:center}
        .logo-img{ width: 180px; height: auto; margin-right: 0;}
        .logo-text { font-size: 24px; font-weight: 700; color: var(--accent); }
        h1{font-size:20px;margin:0}
        nav{display:flex;gap:8px}

        /* Tombol Tab Utama */
        .tab{
            background:transparent;
            border:1px solid var(--muted); 
            padding:8px 14px;
            border-radius:10px;
            cursor:pointer;
            color:var(--muted);
            transition: all 0.2s;
        }
        .tab.active{
            background:var(--accent); 
            border:1px solid var(--accent);
            color:white; 
        }
        
        /* GAYA UMUM GRID DAN CARD */
        .grid{display:grid;grid-template-columns:1fr 360px;gap:16px}
        .card{
            background:var(--card-bg);
            border-radius:12px;
            padding:18px;
            margin-top:12px;
            border: 1px solid #dee2e6;
            box-shadow: 0 0 10px rgba(30, 94, 174, 0.1), 
                        0 4px 12px rgba(0,0,0,0.05); 
        }
        .card-inner { margin-top: 12px; }

        /* INPUT DAN TOMBOL */
        .row{display:flex;gap:8px}
        input,select,textarea{
            width:100%;
            padding:10px;
            border-radius:8px;
            border:1px solid var(--muted);
            background:white;
            color:var(--text-main);
        }
        label {
            display: block;
            margin-top: 8px;
            margin-bottom: 4px;
            font-size: 14px;
            font-weight: 500;
        }
        input:focus, select:focus, textarea:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 0 0 1px var(--accent);
        }
        button{padding:10px 12px;border-radius:10px;border:0;cursor:pointer}
        .btn-primary{background:var(--primary);color:var(--text-main); font-weight: 600;}
        .btn-ghost{background:transparent;border:1px solid var(--muted);color:var(--text-main)}

        /* Gaya Khusus Finance */
        .input-group-row { display: flex; gap: 8px; margin-top: 8px; }
        .input-group-col { display: flex; flex-direction: column; }
        .button-row { margin-top:10px; display:flex; gap:8px; align-items:center }
        .result-box { margin-top: 14px; }
        .bar-container { display: flex; height: 30px; border-radius: 5px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .bar-segment { text-align: center; color: white; font-size: 12px; line-height: 30px; transition: width 0.5s;}
        .bar-fixed { background-color: #007bff; }
        .bar-save { background-color: #28a745; }
        .bar-variable { background-color: var(--primary); color: var(--text-main); }
        .legend { display: flex; justify-content: space-between; margin-top: 5px; font-size: 12px; }
        .expense-list { list-style: none; padding: 0;}
        .expense-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 0;
            border-bottom: 1px dashed #ccc;
        }
        .expense-list li:last-child { border-bottom: none; }
        .expense-list li button {
            background: var(--delete-red);
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 12px;
        }

        /* --- CAREER ZONE CUSTOM STYLES --- */
        #career-nav { display: flex; gap: 10px; margin-bottom: 20px; }
        #career-nav button {
            padding: 8px 14px;
            border: 1px solid var(--accent);
            background: white;
            color: var(--accent);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        #career-nav button.active-sub {
            background: var(--accent);
            color: white;
        }

        /* CV Builder specific styles */
        .cv-input-group > input, .cv-input-group > textarea { margin-bottom: 10px; }
        .row-univ, .row-perusahaan, .org-item {
            display: flex; align-items: center; gap: 10px; margin-bottom: 8px;
        }
        .btn-add {
            padding:5px 10px; font-size:16px; background:#28a745; color:white; border:none; border-radius:6px; cursor:pointer;
        }
        .btn-remove {
            padding:5px 10px; background:var(--delete-red); color:white; border:none; border-radius:6px; cursor:pointer;
        }

        /* Dropdown CV */
        .dropdown { position: relative; width: 100%; }
        .dropdown-btn {
            width: 100%; padding: 10px; background: white; border: 1px solid #ccc; border-radius: 6px; cursor: pointer; text-align: left; font-size: 15px; margin-top: 8px; 
        }
        .dropdown-content {
            display: none; position: absolute; background: white; width: 100%; border: 1px solid #ccc; border-radius: 6px; margin-top: 5px; z-index: 20; max-height: 150px; overflow-y: auto;
        }
        .dropdown-content div { padding: 10px; cursor: pointer; border-bottom: 1px solid #eee; }
        .dropdown-content div:hover { background: #f0f0f0; }
        
        /* CV Preview Style for PDF */
        #cvPreview {
            background: white; padding: 30px; border: 1px solid #eee; box-shadow: 0 0 10px rgba(0,0,0,0.05); min-height: 200px;
        }

        /* --- CAREER PLANNER STYLES --- */
        .category-container { display: flex; gap: 20px; margin-top: 20px; }
        .category-box { 
            background-color: #e9ecef; border-radius: 6px; flex: 1; padding-top: 20px; position: relative; 
            display: flex; flex-direction: column; min-height: 250px; 
        }
        .category-title { 
            font-size: 18px; font-weight: bold; color: #007bff; margin-bottom: 15px; padding: 0 20px; 
        }
        .upload-button { 
            position: absolute; top: 10px; right: 10px; width: 35px; height: 35px; border-radius: 50%; 
            background-color: #28a745; color: white; border: none; cursor: pointer; font-size: 16px; 
            display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); z-index: 10; 
        }

        /* --- Gaya Area Video/Daftar --- */
        .video-list-wrapper {
            flex-grow: 1; display: flex; flex-direction: column; justify-content: flex-end; 
        }

        .video-list {
            list-style: none; /* Tambahkan ini agar tidak ada bullet point */
            padding: 0;
            background-color: #f8f9fa;
            border-top: 1px solid #dee2e6;
            margin-top: 10px;
            padding: 10px;
            border-radius: 0 0 6px 6px;
            text-align: left;
        }

        .video-item {
            display: flex; align-items: center; padding: 8px 0; border-bottom: 1px dotted #ccc; 
            color: #495057; font-size: 14px; transition: background-color 0.5s;
        }
        .video-item:last-child { border-bottom: none; }
        .item-thumbnail {
            width: 40px; height: 40px; border-radius: 4px; object-fit: cover; 
            margin-right: 10px; flex-shrink: 0; 
        }
        .item-title {
            flex-grow: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
        }

        /* --- Gaya Modal --- */
        .modal { 
            display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; 
            height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5); padding-top: 60px; 
        }
        .modal-content { 
            background-color: #fefefe; margin: 5% auto; padding: 30px; border: 1px solid #888; 
            width: 80%; max-width: 500px; border-radius: 8px; 
        }
        .close { 
            color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; 
        }
        .upload-form label { display: block; margin-top: 10px; font-weight: bold; }
        .upload-form input { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .upload-form button { background-color: #007bff; color: white; padding: 10px 15px; border: none; border-radius: 4px; margin-top: 20px; cursor: pointer; }


        /* MENTAL ZONE / CHAT STYLES */
        .app-container { display: flex; flex-direction: column; width: 100%; }
        #selectCounselor { display: flex; flex-direction: column; gap: 15px; padding: 15px; background: white; border-radius: 10px; }
        .counselor-option { padding: 10px; border: 1px solid #eee; border-radius: 8px; transition: background 0.2s; }
        .counselor-option:hover { background: #f1f1f1; }
        .counselor-option label { margin: 0; font-weight: normal; cursor: pointer; display: block; }
        .start-button { background: var(--primary); color: var(--text-main); font-weight: 600; padding: 12px; border-radius: 10px; }
        #chatInterface { display: none; flex-direction: column; height: 500px; background: var(--card-bg); border-radius: 10px; overflow: hidden; }
        .chat-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: var(--accent); color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .konselor-info .status { font-size: 12px; color: #a4c9ff; margin-left: 5px; }
        .action-icons i { font-size: 18px; cursor: pointer; margin-left: 15px; }
        #chatBox { flex-grow: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 10px; }
        .bubble { max-width: 70%; padding: 10px 12px; border-radius: 15px; word-wrap: break-word; }
        .bubble.me { align-self: flex-end; background-color: #dcf8c6; color: var(--text-main); border-bottom-right-radius: 0; }
        .bubble.other { align-self: flex-start; background-color: white; color: var(--text-main); border: 1px solid #eee; border-bottom-left-radius: 0; }
        .chat-input { display: flex; padding: 10px 15px; border-top: 1px solid #eee; background: white; align-items: center; }
        .input-wrapper { flex-grow: 1; margin-right: 10px; }
        .chat-input input { border-radius: 20px; padding: 8px 15px; border: 1px solid #ccc; background: #f8f8f8; }
        .mic-button { background: var(--accent); color: white; width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 16px; padding: 0; }
        #mental #chatInterface { display: none; } /* Pastikan chat tersembunyi di awal load Mental Zone */


        /* FOOTER */
        footer{ margin-top:18px; text-align:center; color:var(--muted); font-size:13px }

        /* RESPONSIVE */
        @media(max-width:900px){
            .grid{grid-template-columns:1fr}
            .brand h1{font-size:16px}
            .logo-img{width:150px;height:auto;margin-right:0;}
            .category-container { flex-direction: column; }
        }
        /* ========================================= */
        /* === BAGIAN CSS END === */
        /* ========================================= */
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="brand">
                <img class="logo-img" src="img/logo vinix asisten.png" onerror="this.style.display='none'; document.getElementById('logo-text').style.display='block';" alt="Vinix Asisten Logo"> 
                <div class="logo-text" id="logo-text" style="display:none;">VINIX 7</div>
                <div>
                    <h1>Asisten Digital</h1> 
                    <div class="muted">Selamat Datang</div>
                </div>
            </div>
            <nav>
                <button class="tab active" data-tab="finance">Finance Zone</button>
                <button class="tab" data-tab="career">Career Zone</button>
                <button class="tab" data-tab="mental">Mental Zone</button>
                <button class="tab" onclick="window.location.href='index.html';">Logout</button>
            </nav>
        </header>

        <section id="finance" class="card active-section" style="display:block;">
            <div class="grid">
                <div>
                    <h2>Smart Budgeting (Visualisasi Data Sederhana)</h2>
                    <p class="muted">Masukkan pemasukan dan kategori pengeluaran — Vinix akan bantu bikin rekomendasi anggaran sederhana.</p>

                    <div class="card card-inner">
                        <label>Penghasilan Bulanan (Rp)</label>
                        <input id="income" type="number" value="5000000" />
                        
                        <div class="input-group-row">
                            <div class="input-group-col flex-1">
                                <label>Pengeluaran Tetap (Rp)</label>
                                <input id="fixed" type="number" value="2000000" />
                            </div>
                            <div class="input-group-col" style="width:140px">
                                <label>Simpanan Target (%)</label>
                                <input id="savePct" type="number" value="20" />
                            </div>
                        </div>
                        <div class="button-row">
                            <button class="btn-primary" id="calcBudget">Hitung Rekomendasi</button>
                            <button class="btn-ghost" id="resetBudget">Reset</button>
                        </div>

                        <div id="budgetResult" class="result-box"></div>
                        
                        <div id="distributionGraph" class="graph-section" style="display:none;">
                            <h4 class="graph-title">Distribusi Budget Bulanan</h4>
                            <div id="barContainer" class="bar-container">
                                <div id="fixedBar" class="bar-segment bar-fixed"></div>
                                <div id="saveBar" class="bar-segment bar-save"></div>
                                <div id="variableBar" class="bar-segment bar-variable"></div>
                            </div>
                            <div class="legend">
                                <span><span class="legend-box fixed-color" style="color:#007bff;">■</span> Tetap (<span id="fixedVal">0</span>)</span>
                                <span><span class="legend-box save-color" style="color:#28a745;">■</span> Simpanan (<span id="saveVal">0</span>)</span>
                                <span><span class="legend-box variable-color" style="color:var(--primary);">■</span> Variabel (<span id="variableVal">0</span>)</span>
                            </div>
                        </div>
                        <div id="budgetProgress" class="progress-section" style="display:none; margin-top:15px;">
                            <div class="muted">Estimasi Dana Variabel Terpakai: <b id="spentAmountDisplay">Rp 0</b></div>
                            <div class="progress-bar-container" style="height:10px; background:#e9ecef; border-radius:5px; margin-top:5px;">
                                <div id="variableProgress" class="progress-bar" style="width:0%; height:100%; background:#fd7e14; border-radius:5px;"></div>
                            </div>
                            <div class="muted progress-ratio"><span id="spentRatio">0%</span> dari Anggaran Variabel (<span id="variableBudgetDisplay">Rp 0</span>)</div>
                        </div>
                    </div>

                    <div class="card card-inner list-section">
                        <h3>Catatan Pengeluaran</h3>
                        <div class="row expense-input-row">
                            <input id="expName" placeholder="Nama pengeluaran, contoh: transport" />
                            <input id="expAmt" type="number" placeholder="Rp" />
                            <button id="addExp" class="btn-primary">Tambah</button>
                        </div>
                        <ul id="expList" class="expense-list"></ul>
                    </div>
                </div>

                <aside>
                    <div class="card">
                        <h3>Ringkasan</h3>
                        <div class="muted" id="summaryText">Belum ada perhitungan.</div>
                    </div>

                    <div class="card">
                        <h3>Tips Cepat</h3>
                        <ul class="muted tip-list" style="padding-left:15px; margin:0;">
                            <li>Mulai catat semua pengeluaran kecil selama 1 minggu.</li>
                            <li>Prioritaskan dana darurat minimal 3 bulan pengeluaran tetap.</li>
                            <li>Pakai target simpanan otomatis (20% sebagai awalan).</li>
                        </ul>
                    </div>
                </aside>
            </div>
        </section>

        <section id="career" class="card" style="display:none;">
            <h2>Career Zone</h2>
            <div id="career-nav">
                <button class="active-sub" onclick="showCareerSubPage('cv', this)">CV Builder</button>
                <button onclick="showCareerSubPage('planner', this)">Career Planner</button>
            </div>

            <div id="career-cv" class="career-sub-page">
                <h3>CV Builder</h3>

                <div class="card cv-input-group">
                    <label><b>Upload Foto</b></label>
                    <input type="file" id="fotoCV" accept="image/*" onchange="previewFoto()">
                    <img id="previewFotoCV" style="width:120px;margin-top:10px;display:none;border-radius:10px;">
                </div>

                <div class="card cv-input-group">
                    <input class="input" id="cvNama" placeholder="Nama Lengkap">
                    <input class="input" id="cvHP" placeholder="Nomor HP">
                    <input class="input" id="cvEmail" placeholder="Email">
                    <input class="input" id="cvLinkedIn" placeholder="LinkedIn">
                    <input class="input" id="cvAlamat" placeholder="Alamat">
                    <textarea class="input" id="cvDeskripsiSingkat" placeholder="Deskripsi Singkat"></textarea>
                    <textarea class="input" id="cvExtraDeskripsi" placeholder="Skill / Prestasi / Pengalaman Tambahan"></textarea>
                </div>

                <h3>Pendidikan</h3>
                <div class="card cv-input-group">
                    <div id="listUniversitas">
                        <div class="row-univ">
                            <input class="input" placeholder="Nama Sekolah / Universitas" data-type="sekolah" style="flex:1;">
                            <button onclick="tambahUniversitas(this)" class="btn-add">+</button>
                        </div>
                    </div>
                    <input class="input" id="cvAwalSekolah" placeholder="Tgl Mulai">
                    <input class="input" id="cvAkhirSekolah" placeholder="Tgl Kelulusan">
                    <input class="input" id="cvNilai" placeholder="Nilai / IPK">
                </div>

                <h3>Pengalaman Kerja</h3>
                <div class="card cv-input-group">
                    <div id="listPerusahaan">
                        <div class="row-perusahaan">
                            <input class="input" placeholder="Nama Perusahaan" data-type="perusahaan" style="flex:1;">
                            <button onclick="tambahPerusahaan(this)" class="btn-add">+</button>
                        </div>
                    </div>
                    <input class="input" id="cvAwalKerja" placeholder="Tgl Mulai">
                    <input class="input" id="cvAkhirKerja" placeholder="Tgl Berakhir">
                    <input class="input" id="cvPosisi" placeholder="Posisi">
                </div>

                <h3>Pengalaman Organisasi</h3>
                <div class="card cv-input-group">
                    <label><b>Nama Organisasi / Kegiatan</b></label>
                    <div id="listOrganisasi">
                        <div class="org-item">
                            <input class="input" placeholder="Nama Organisasi" data-type="organisasi" style="flex:1;">
                            <button onclick="tambahOrganisasi(this)" class="btn-add">+</button>
                        </div>
                    </div>
                    <input class="input" id="cvAwalOrg" placeholder="Tgl Mulai">
                    <input class="input" id="cvAkhirOrg" placeholder="Tgl Berakhir">
                    <input class="input" id="cvJabatan" placeholder="Jabatan">
                    <input class="input" id="cvPosisiOrg" placeholder="Posisi (di Organisasi)"> 
                    <input class="input" id="cvKepanitiaan" placeholder="Pengalaman Kepanitiaan">
                    <input class="input" id="cvTglAcara" placeholder="Tgl Acara">
                </div>

                <h3>Skill, Prestasi & Pengalaman Lain</h3>
                <div class="card cv-input-group">
                    <label style="margin-top:10px;"><b>Kategori</b></label>
                    <div class="dropdown" style="margin-bottom:10px;">
                        <button class="dropdown-btn" id="kategoriBtn" onclick="toggleDropdown()">Pilih Kategori</button>
                        <div class="dropdown-content" id="kategoriMenu">
                            <div onclick="pilihKategori('Lomba')">Lomba</div>
                            <div onclick="pilihKategori('Seminar')">Seminar</div>
                            <div onclick="pilihKategori('Workshop')">Workshop</div>
                        </div>
                    </div>
                    <input type="hidden" id="kategoriHasil" value="">
                    <input class="input" id="cvtahun" placeholder="Tahun">
                    <textarea class="input" id="cvDeskripsiSkill" placeholder="Deskripsi kegiatan/skill/prestasi" style="height:80px;"></textarea>
                </div>

                <div class="button-row">
                    <button onclick="generateCV()" class="btn-primary" style="background:#0078ff;">Preview CV</button>
                    <button onclick="downloadPDF()" class="btn-primary" style="background:#00b359;">Download PDF</button>
                </div>
                <div id="cvPreview" class="card" style="margin-top:20px;">Isi form di atas lalu klik "Preview CV"</div>
            </div>

            <div id="career-planner" class="career-sub-page" style="display:none;">
                <h3>Career Planner</h3>

                <div class="card">
                    <p>Pilih kotak di bawah untuk Kelola Postingan Webinar, Lihat Daftar, atau Fitur Lain.</p>
                    <div class="category-container">
                        <div class="category-box">
                            <div class="category-title">Postingan Webinar</div>
                            <button class="upload-button" onclick="openModal('webinar')"><i class="fas fa-plus"></i></button>
                            <div class="video-list-wrapper">
                                <ul id="webinar-list" class="video-list"></ul>
                            </div>
                        </div>

                        <div class="category-box">
                            <div class="category-title">Pelatihan Vinix</div>
                            <button class="upload-button" onclick="openModal('pelatihan')"><i class="fas fa-plus"></i></button>
                            <div class="video-list-wrapper">
                                <ul id="pelatihan-list" class="video-list"></ul>
                            </div>
                        </div>

                        <div class="category-box">
                            <div class="category-title">Eksternal</div>
                            <button class="upload-button" onclick="openModal('eksternal')"><i class="fas fa-plus"></i></button>
                            <div class="video-list-wrapper">
                                <ul id="eksternal-list" class="video-list"></ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="mental" class="card" style="display:none;">
            <div class="grid" style="grid-template-columns:1fr;"> 
                <div class="app-container">
                    <div id="selectCounselor">
                        <h2>Mental Zone</h2>
                        <h3>Curhat Konselor</h3>

                        <div class="counselor-option">
                            <label><input type="radio" name="konselor" value="Konselor 1"> Konselor 1 (Spesialis Hubungan)</label>
                        </div>
                        <div class="counselor-option">
                            <label><input type="radio" name="konselor" value="Konselor 2"> Konselor 2 (Spesialis Kecemasan)</label>
                        </div>
                        <div class="counselor-option">
                            <label><input type="radio" name="konselor" value="Konselor 3"> Konselor 3 (Spesialis Karir)</label>
                        </div>

                        <button class="start-button" onclick="mulaiChat()">Mulai Chat</button>
                    </div>
                    
                    
                    <div id="chatInterface">
                        <header class="chat-header">
                            <div class="konselor-info">
                                <span class="konselor-name" id="konselorName"></span>
                                <span class="status">online</span>
                            </div>
                            <div class="action-icons">
                                <i class="fas fa-video" onclick="simulateCall('Video Call')"></i> 
                                <i class="fas fa-phone" onclick="simulateCall('Telepon')"></i> 
                            </div>
                        </header>

                        <main id="chatBox">
                            </main>

                        <footer class="chat-input">
                            <div class="input-wrapper">
                                <input type="text" id="msg" placeholder="Mulai chat..." onkeypress="if(event.key === 'Enter') sendMsg()">
                            </div>
                            <button class="mic-button" onclick="sendMsg()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </footer>
                    </div>
                </div>
            </div>
        </section>

        <div id="uploadModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h3 id="modalTitle">Upload Konten</h3>
                
                <form id="uploadForm" class="upload-form">
                    <input type="hidden" id="targetCategory" name="targetCategory" value="">

                    <label for="contentName">Nama Konten (Judul):</label>
                    <input type="text" id="contentName" name="contentName" required placeholder="Masukkan judul video, artikel, dll.">

                    <label for="contentFile">Pilih File (Gambar/Video/Dokumen):</label>
                    <input type="file" id="contentFile" name="contentFile" accept="image/*, video/*, .pdf, .docx" required>

                    <button type="submit">Unggah Sekarang (Simulasi)</button>
                </form>
            </div>
        </div>

        <footer>
            &copy; 2025 Vinix 7 - Asisten Digital. All Rights Reserved.
        </footer>
    </div>

    <script>
        // =========================================
        // === BAGIAN JAVASCRIPT START (Perbaikan Total) ===
        // =========================================
        
        let expenses = []; // Digunakan oleh Finance Zone
        let variableBudget = 0; // Digunakan oleh Finance Zone
        let activeKonselorName = ""; // Digunakan oleh Mental Zone

        // --- UTILITY FUNCTION ---
        const formatRupiah = (number) => {
            return new Intl.NumberFormat('id-ID', {
                style: 'currency',
                currency: 'IDR',
                minimumFractionDigits: 0
            }).format(number);
        };
        
        // --- NAVIGASI UTAMA (TABS) ---
        function setupTabs() {
            document.querySelectorAll('.tab').forEach(button => {
                button.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-tab');

                    document.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.querySelectorAll('section').forEach(section => section.style.display = 'none');
                    
                    const targetSection = document.getElementById(targetId);
                    if(targetSection) {
                        targetSection.style.display = 'block';
                    }
                    
                    if (targetId === 'career') {
                        // Pastikan sub-tab CV aktif saat pertama kali masuk ke Career Zone
                        const defaultSubTab = document.querySelector('#career-nav button[onclick*="\'cv\'"]');
                        if (defaultSubTab) {
                            showCareerSubPage('cv', defaultSubTab);
                        }
                    }
                    if (targetId === 'mental') {
                         // Reset chat tampilan saat pindah ke Mental Zone
                         document.getElementById("selectCounselor").style.display = 'flex';
                         document.getElementById("chatInterface").style.display = 'none';
                    }
                });
            });
        }
        
        // =========================================
        // --- 1. FINANCE ZONE SCRIPT ---
        // =========================================

        function calculateBudget() {
            const income = parseFloat(document.getElementById('income').value) || 0;
            const fixed = parseFloat(document.getElementById('fixed').value) || 0;
            const savePct = parseFloat(document.getElementById('savePct').value) || 0;
            
            const saveAmount = income * (savePct / 100);
            variableBudget = income - fixed - saveAmount;

            // Pastikan variableBudget tidak negatif
            variableBudget = Math.max(0, variableBudget);

            const resultHtml = `
                <p><strong>Anggaran Variabel (Max Pengeluaran):</strong> ${formatRupiah(variableBudget)}</p>
                <p><strong>Simpanan Target (${savePct}%):</strong> ${formatRupiah(saveAmount)}</p>
                <p class="muted">Anggaran ini menggunakan pola 50/30/20 (Tetap/Variabel/Tabungan) sebagai referensi.</p>
            `;
            document.getElementById('budgetResult').innerHTML = resultHtml;
            document.getElementById('summaryText').innerHTML = `
                <p>Penghasilan: ${formatRupiah(income)}</p>
                <p>Anggaran Variabel Tersedia: ${formatRupiah(variableBudget)}</p>
                <p>Total Pengeluaran Dicatat: ${formatRupiah(calculateSpent())}</p>
            `;

            // Update Graph
            const total = income;
            const fixedWidth = (fixed / total) * 100;
            const saveWidth = (saveAmount / total) * 100;
            const variableWidth = (variableBudget / total) * 100;

            document.getElementById('fixedBar').style.width = `${fixedWidth}%`;
            document.getElementById('saveBar').style.width = `${saveWidth}%`;
            document.getElementById('variableBar').style.width = `${variableWidth}%`;

            document.getElementById('fixedBar').textContent = fixedWidth > 5 ? `${Math.round(fixedWidth)}%` : '';
            document.getElementById('saveBar').textContent = saveWidth > 5 ? `${Math.round(saveWidth)}%` : '';
            document.getElementById('variableBar').textContent = variableWidth > 5 ? `${Math.round(variableWidth)}%` : '';
            
            document.getElementById('fixedVal').textContent = formatRupiah(fixed);
            document.getElementById('saveVal').textContent = formatRupiah(saveAmount);
            document.getElementById('variableVal').textContent = formatRupiah(variableBudget);

            document.getElementById('distributionGraph').style.display = 'block';
            document.getElementById('budgetProgress').style.display = 'block';
            document.getElementById('variableBudgetDisplay').textContent = formatRupiah(variableBudget);
            
            updateExpenseProgress();
        }

        function calculateSpent() {
            return expenses.reduce((total, exp) => total + exp.amount, 0);
        }

        function updateExpenseProgress() {
            const spent = calculateSpent();
            let progressPct = (spent / variableBudget) * 100;

            if (variableBudget === 0) {
                progressPct = 0;
            }

            document.getElementById('spentAmountDisplay').textContent = formatRupiah(spent);
            document.getElementById('spentRatio').textContent = `${Math.round(progressPct)}%`;
            document.getElementById('variableProgress').style.width = `${Math.min(100, progressPct)}%`;
            
            // Beri peringatan visual jika melebihi budget
            const progressBar = document.getElementById('variableProgress');
            if (progressPct > 100) {
                progressBar.style.backgroundColor = 'var(--delete-red)'; // Merah jika over budget
                document.getElementById('spentRatio').style.color = 'var(--delete-red)';
            } else if (progressPct > 70) {
                 progressBar.style.backgroundColor = '#fd7e14'; // Oranye jika hampir habis
                 document.getElementById('spentRatio').style.color = '#fd7e14';
            } else {
                 progressBar.style.backgroundColor = '#007bff'; // Biru default
                 document.getElementById('spentRatio').style.color = 'var(--text-main)';
            }
            
            calculateBudget(); // Perbarui ringkasan
        }

        function renderExpenses() {
            const listEl = document.getElementById('expList');
            listEl.innerHTML = '';
            expenses.forEach((exp, index) => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span>${exp.name} (${formatRupiah(exp.amount)})</span>
                    <button onclick="removeExpense(${index})">Hapus</button>
                `;
                listEl.appendChild(li);
            });
            updateExpenseProgress();
        }

        window.addExpense = function() {
            const name = document.getElementById('expName').value.trim();
            const amt = parseFloat(document.getElementById('expAmt').value);
            
            if (name && amt > 0) {
                expenses.push({ name: name, amount: amt });
                document.getElementById('expName').value = '';
                document.getElementById('expAmt').value = '';
                renderExpenses();
            } else {
                alert('Masukkan nama dan jumlah pengeluaran yang valid.');
            }
        };

        window.removeExpense = function(index) {
            expenses.splice(index, 1);
            renderExpenses();
        };
        
        function resetBudget() {
             document.getElementById('income').value = '5000000';
             document.getElementById('fixed').value = '2000000';
             document.getElementById('savePct').value = '20';
             expenses = [];
             document.getElementById('budgetResult').innerHTML = '';
             document.getElementById('distributionGraph').style.display = 'none';
             document.getElementById('budgetProgress').style.display = 'none';
             document.getElementById('summaryText').textContent = 'Belum ada perhitungan.';
             document.getElementById('expList').innerHTML = '';
             variableBudget = 0;
        }

        // =========================================
        // --- 2. CAREER ZONE SCRIPT (CV Builder) ---
        // =========================================

        window.previewFoto = function() {
            const input = document.getElementById('fotoCV');
            const preview = document.getElementById('previewFotoCV');
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                }
                reader.readAsDataURL(input.files[0]);
            } else {
                preview.style.display = 'none';
            }
        };

        // Fungsi dinamis untuk menambah input (Pendidikan, Kerja, Organisasi)
        function createDynamicInput(containerId, inputPlaceholder, type, removeFunc) {
            const container = document.getElementById(containerId);
            const newRow = document.createElement('div');
            newRow.className = `${type}-item row`;

            newRow.innerHTML = `
                <input class="input" placeholder="${inputPlaceholder}" data-type="${type}" style="flex:1;">
                <button onclick="${removeFunc}(this)" class="btn-remove">-</button>
            `;
            // Ganti tombol '+' pada baris sebelumnya menjadi tombol '-'
            const lastRow = container.lastElementChild;
            if(lastRow && lastRow.querySelector('.btn-add')) {
                 const addButton = lastRow.querySelector('.btn-add');
                 addButton.outerHTML = `<button onclick="${removeFunc}(this)" class="btn-remove">-</button>`;
            }

            // Tambahkan tombol '+' baru di baris ini
             const addButton = document.createElement('button');
             addButton.className = 'btn-add';
             addButton.textContent = '+';
             addButton.setAttribute('onclick', `tambah${type.charAt(0).toUpperCase() + type.slice(1)}(this)`);

             newRow.appendChild(addButton);

            container.appendChild(newRow);
        }

        // Fungsi Tambah Input Dinamis
        window.tambahUniversitas = function(button) {
             const container = document.getElementById('listUniversitas');
             const newRow = document.createElement('div');
             newRow.className = `row-univ`;
             newRow.innerHTML = `
                 <input class="input" placeholder="Nama Sekolah / Universitas" data-type="sekolah" style="flex:1;">
                 <button onclick="removeInput(this.parentNode)" class="btn-remove">-</button>
                 <button onclick="tambahUniversitas(this)" class="btn-add">+</button>
             `;
             // Ganti tombol '+' sebelumnya menjadi '-'
             const prevRow = button.parentNode;
             button.outerHTML = `<button onclick="removeInput(this.parentNode)" class="btn-remove">-</button>`;
             
             container.appendChild(newRow);
        };

        window.tambahPerusahaan = function(button) {
             const container = document.getElementById('listPerusahaan');
             const newRow = document.createElement('div');
             newRow.className = `row-perusahaan`;
             newRow.innerHTML = `
                 <input class="input" placeholder="Nama Perusahaan" data-type="perusahaan" style="flex:1;">
                 <button onclick="removeInput(this.parentNode)" class="btn-remove">-</button>
                 <button onclick="tambahPerusahaan(this)" class="btn-add">+</button>
             `;
             const prevRow = button.parentNode;
             button.outerHTML = `<button onclick="removeInput(this.parentNode)" class="btn-remove">-</button>`;
             
             container.appendChild(newRow);
        };

        window.tambahOrganisasi = function(button) {
             const container = document.getElementById('listOrganisasi');
             const newRow = document.createElement('div');
             newRow.className = `org-item`;
             newRow.innerHTML = `
                 <input class="input" placeholder="Nama Organisasi" data-type="organisasi" style="flex:1;">
                 <button onclick="removeInput(this.parentNode)" class="btn-remove">-</button>
                 <button onclick="tambahOrganisasi(this)" class="btn-add">+</button>
             `;
             const prevRow = button.parentNode;
             button.outerHTML = `<button onclick="removeInput(this.parentNode)" class="btn-remove">-</button>`;
             
             container.appendChild(newRow);
        };
        
        window.removeInput = function(rowElement) {
            const container = rowElement.parentNode;
            rowElement.remove();
             // Jika baris terakhir dihapus, tambahkan tombol '+' ke baris sebelumnya (kecuali jika hanya 1 baris)
             if (container.children.length > 0) {
                 const lastRow = container.lastElementChild;
                 if (!lastRow.querySelector('.btn-add')) {
                     const addButton = document.createElement('button');
                     addButton.className = 'btn-add';
                     addButton.textContent = '+';
                     
                     // Tentukan fungsi tambah yang sesuai berdasarkan ID container
                     let addFunc;
                     if (container.id === 'listUniversitas') addFunc = 'tambahUniversitas';
                     else if (container.id === 'listPerusahaan') addFunc = 'tambahPerusahaan';
                     else if (container.id === 'listOrganisasi') addFunc = 'tambahOrganisasi';
                     
                     if (addFunc) {
                         addButton.setAttribute('onclick', `${addFunc}(this)`);
                         lastRow.appendChild(addButton);
                     }
                 }
             }
        };


        window.toggleDropdown = function() {
            document.getElementById("kategoriMenu").style.display = 
                document.getElementById("kategoriMenu").style.display === "block" ? "none" : "block";
        };

        window.pilihKategori = function(kategori) {
            document.getElementById("kategoriBtn").textContent = kategori;
            document.getElementById("kategoriHasil").value = kategori;
            document.getElementById("kategoriMenu").style.display = "none";
        };

        window.generateCV = function() {
            const data = {
                nama: document.getElementById('cvNama').value,
                hp: document.getElementById('cvHP').value,
                email: document.getElementById('cvEmail').value,
                linkedin: document.getElementById('cvLinkedIn').value,
                alamat: document.getElementById('cvAlamat').value,
                deskripsiSingkat: document.getElementById('cvDeskripsiSingkat').value,
                extraDeskripsi: document.getElementById('cvExtraDeskripsi').value,
                foto: document.getElementById('previewFotoCV').src,
                
                // Pendidikan
                univ: Array.from(document.querySelectorAll('#listUniversitas input[data-type="sekolah"]')).map(input => input.value).filter(v => v),
                awalSekolah: document.getElementById('cvAwalSekolah').value,
                akhirSekolah: document.getElementById('cvAkhirSekolah').value,
                nilai: document.getElementById('cvNilai').value,

                // Kerja
                perusahaan: Array.from(document.querySelectorAll('#listPerusahaan input[data-type="perusahaan"]')).map(input => input.value).filter(v => v),
                awalKerja: document.getElementById('cvAwalKerja').value,
                akhirKerja: document.getElementById('cvAkhirKerja').value,
                posisi: document.getElementById('cvPosisi').value,
                
                // Organisasi
                organisasi: Array.from(document.querySelectorAll('#listOrganisasi input[data-type="organisasi"]')).map(input => input.value).filter(v => v),
                awalOrg: document.getElementById('cvAwalOrg').value,
                akhirOrg: document.getElementById('cvAkhirOrg').value,
                jabatan: document.getElementById('cvJabatan').value,
                posisiOrg: document.getElementById('cvPosisiOrg').value,
                kepanitiaan: document.getElementById('cvKepanitiaan').value,
                tglAcara: document.getElementById('cvTglAcara').value,
                
                // Skill/Prestasi
                kategori: document.getElementById('kategoriHasil').value,
                tahun: document.getElementById('cvtahun').value,
                deskripsiSkill: document.getElementById('cvDeskripsiSkill').value
            };

            let cvHtml = `<div style="padding:20px; font-family:'Poppins',sans-serif;">`;
            
            // Header & Info Pribadi
            cvHtml += `
                <div style="display:flex; justify-content:space-between; align-items:flex-start; border-bottom:3px solid var(--accent); padding-bottom:10px; margin-bottom:15px;">
                    <div>
                        <h2 style="margin:0; color:var(--accent);">${data.nama || 'Nama Lengkap Anda'}</h2>
                        <p style="margin:0; font-size:14px; color:var(--muted);">${data.deskripsiSingkat || 'Deskripsi Singkat / Profesi'}</p>
                        <div style="margin-top:10px; font-size:12px;">
                            ${data.hp ? `<p style="margin:2px 0;"><i class="fas fa-phone-alt"></i> ${data.hp}</p>` : ''}
                            ${data.email ? `<p style="margin:2px 0;"><i class="fas fa-envelope"></i> ${data.email}</p>` : ''}
                            ${data.linkedin ? `<p style="margin:2px 0;"><i class="fab fa-linkedin"></i> ${data.linkedin}</p>` : ''}
                            ${data.alamat ? `<p style="margin:2px 0;"><i class="fas fa-map-marker-alt"></i> ${data.alamat}</p>` : ''}
                        </div>
                    </div>
                    ${data.foto.includes('data:image') ? `<img src="${data.foto}" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:3px solid var(--primary);">` : ''}
                </div>
            `;
            
            // Bagian Pendidikan
            if (data.univ.length > 0 || data.awalSekolah || data.nilai) {
                cvHtml += `
                    <h4 style="color:var(--accent); border-bottom:1px solid #eee; padding-bottom:5px;">Pendidikan</h4>
                    <div style="margin-bottom:10px;">
                        ${data.univ.map(u => `<p style="margin:2px 0; font-weight:600;">${u}</p>`).join('')}
                        <p style="margin:2px 0; font-size:13px;">${data.awalSekolah} - ${data.akhirSekolah} (${data.nilai || 'IPK: -'})</p>
                    </div>
                `;
            }

            // Bagian Pengalaman Kerja
            if (data.perusahaan.length > 0 || data.posisi) {
                cvHtml += `
                    <h4 style="color:var(--accent); border-bottom:1px solid #eee; padding-bottom:5px;">Pengalaman Kerja</h4>
                    <div style="margin-bottom:10px;">
                        ${data.perusahaan.map(p => `<p style="margin:2px 0; font-weight:600;">${data.posisi || 'Posisi'} di ${p}</p>`).join('')}
                        <p style="margin:2px 0; font-size:13px;">${data.awalKerja} - ${data.akhirKerja}</p>
                    </div>
                `;
            }

            // Bagian Organisasi
            if (data.organisasi.length > 0 || data.jabatan || data.posisiOrg || data.kepanitiaan) {
                cvHtml += `
                    <h4 style="color:var(--accent); border-bottom:1px solid #eee; padding-bottom:5px;">Pengalaman Organisasi</h4>
                    <div style="margin-bottom:10px;">
                        ${data.organisasi.map(o => `<p style="margin:2px 0; font-weight:600;">${data.jabatan || 'Anggota'} di ${o}</p>`).join('')}
                        ${data.posisiOrg ? `<p style="margin:2px 0; font-size:13px;">Posisi: ${data.posisiOrg}</p>` : ''}
                        ${data.kepanitiaan ? `<p style="margin:2px 0; font-size:13px;">Kepanitiaan: ${data.kepanitiaan} (${data.tglAcara})</p>` : ''}
                        <p style="margin:2px 0; font-size:13px;">${data.awalOrg} - ${data.akhirOrg}</p>
                    </div>
                `;
            }

            // Bagian Skill/Ekstra
            if (data.extraDeskripsi || data.deskripsiSkill) {
                cvHtml += `
                    <h4 style="color:var(--accent); border-bottom:1px solid #eee; padding-bottom:5px;">Skill & Tambahan</h4>
                    ${data.extraDeskripsi ? `<p style="font-size:14px;">${data.extraDeskripsi}</p>` : ''}
                    ${data.deskripsiSkill ? `<p style="font-size:14px; margin-top:10px;"><strong>${data.kategori || 'Kegiatan Lain'} (${data.tahun})</strong>: ${data.deskripsiSkill}</p>` : ''}
                `;
            }

            cvHtml += `</div>`;
            document.getElementById('cvPreview').innerHTML = cvHtml;
        };

        window.downloadPDF = function() {
            const element = document.getElementById('cvPreview');
            if (element.innerHTML.includes('Isi form')) {
                alert('Silakan isi form dan klik "Preview CV" terlebih dahulu.');
                return;
            }
            
            const opt = {
                margin: 10,
                filename: 'Curriculum_Vitae_Vinix7.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2 },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            };

            // Gunakan html2pdf library
            html2pdf().set(opt).from(element).save();
        };
        
        // Fungsi untuk mengaktifkan sub-page (CV atau Planner)
        window.showCareerSubPage = function(pageId, button) {
            document.querySelectorAll('.career-sub-page').forEach(page => {
                page.style.display = 'none';
            });
            document.getElementById(`career-${pageId}`).style.display = 'block';

            document.querySelectorAll('#career-nav button').forEach(btn => {
                btn.classList.remove('active-sub');
            });
            if (button) {
                button.classList.add('active-sub');
            }
        };
        
        // =========================================
        // --- 2. CAREER ZONE SCRIPT (Planner Modal) ---
        // =========================================

       let careerData = {
    webinar: [{title: 'Webinar: Strategi Karier 2025', icon: 'fas fa-video', color: '#007bff'}],
    pelatihan: [{title: 'Pelatihan: Skill Dasar UX/UI', icon: 'fas fa-graduation-cap', color: '#17a2b8'}],
    eksternal: [{title: 'Eksternal: Lowongan Terbaru', icon: 'fas fa-briefcase', color: '#28a745'}]
};

// Cek tipe file
function getFileInfo(file) {
    const ext = file.name.split('.').pop().toLowerCase();
    if (['jpg', 'jpeg', 'png', 'gif'].includes(ext)) return {type: 'image'};
    if (['mp4', 'mov', 'avi', 'webm'].includes(ext)) return {type: 'video'};
    if (['pdf', 'doc', 'docx'].includes(ext)) return {type: 'document'};
    return {type: 'other'};
}

function renderCareerLists() {
    for (const category in careerData) {
        const listEl = document.getElementById(`${category}-list`);
        if (listEl) {
            listEl.innerHTML = '';
            careerData[category].forEach(item => {
                const li = document.createElement('li');
                li.className = 'video-item';

                // Jika item adalah gambar → tampilkan thumbnail
                if (item.previewImage) {
                    li.innerHTML = `
                        <img src="${item.previewImage}" class="item-thumbnail" style="width:60px;height:60px;object-fit:cover;border-radius:8px;">
                        <span class="item-title">${item.title}</span>
                    `;
                } else {
                    // Default icon
                    li.innerHTML = `
                        <i class="${item.icon} item-thumbnail" style="color:${item.color}; font-size:40px;"></i>
                        <span class="item-title">${item.title}</span>
                    `;
                }

                listEl.appendChild(li);
            });
        }
    }
}

window.openModal = function(category) {
    document.getElementById('modalTitle').textContent = `Upload Konten ${category.charAt(0).toUpperCase() + category.slice(1)}`;
    document.getElementById('targetCategory').value = category;
    document.getElementById('uploadModal').style.display = 'block';
};

window.closeModal = function() {
    document.getElementById('uploadModal').style.display = 'none';
    document.getElementById('uploadForm').reset();
};

// Listener Form Upload
document.getElementById('uploadForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const category = document.getElementById('targetCategory').value;
    const name = document.getElementById('contentName').value;
    const file = document.getElementById('contentFile').files[0];

    if (name && file) {
        const fileInfo = getFileInfo(file);

        // Jika gambar → baca file dan tampilkan thumbnail
        if (fileInfo.type === 'image') {
            const reader = new FileReader();
            reader.onload = function(event) {
                careerData[category].push({
                    title: name,
                    previewImage: event.target.result  // tampilkan thumbnail
                });
                renderCareerLists();
                closeModal();
            };
            reader.readAsDataURL(file);
        } else {
            // Jika bukan gambar → pakai icon default
            careerData[category].push({
                title: name,
                icon: 'fas fa-file',
                color: '#333'
            });
            renderCareerLists();
            closeModal();
        }
    } else {
        alert('Harap isi Judul dan pilih File.');
    }
});

// Close modal when clicking outside
window.onclick = function(event) {
    if (event.target === document.getElementById('uploadModal')) {
        closeModal();
    }
};

        // =========================================
        // --- 3. MENTAL ZONE SCRIPT (Chat) ---
        // =========================================

        const responses = {
            "halo": "Halo, saya mendengarkan. Apa yang sedang kamu rasakan?",
            "hai": "Hai, aku di sini untuk membantu kamu.",
            "sedih": "Perasaan sedih itu valid. Mau cerita lebih dalam? Aku siap mendengarkan.",
            "capek": "Kelelahan emosional itu nyata. Apa yang bikin kamu merasa capek? Fokus pada satu hal.",
            "marah": "Kemarahan sering muncul dari tekanan. Apa pemicunya menurutmu? Mari kita bahas perlahan.",
            "sendiri": "Perasaan sendiri memang berat. Tapi kamu tidak sendiri sekarang. Apa yang bisa aku bantu?",
            "stres": "Stres memang berat di kepala. Apa penyebab paling besar menurutmu? Mari kita cari solusinya.",
            "terimakasih": "Sama-sama. Aku selalu siap bantu kamu. Ada lagi?",
            "makasih": "Dengan senang hati membantu. Jangan ragu untuk berbagi lagi.",
            "takut": "Rasa takut sering muncul dari pikiran yang belum pasti. Apa yang membuatmu takut? Aku di sini.",
            "hubungan": "Masalah hubungan memang rumit. Bagaimana situasinya saat ini?",
            "kerja": "Tuntutan pekerjaan sering menekan. Apakah ini masalah beban atau ekspektasi?",
            "sekolah": "Pendidikan adalah tantangan. Apa yang paling membuatmu tertekan di sekolah?"
        };

        window.mulaiChat = function() {
            let konselorRadio = document.querySelector("input[name='konselor']:checked");
            
            if (!konselorRadio) { 
                alert("Pilih konselor dulu sebelum memulai chat!"); 
                return; 
            }

            activeKonselorName = konselorRadio.value;

            document.getElementById("konselorName").innerText = activeKonselorName;
            
            let box = document.getElementById("chatBox");
            box.innerHTML = ''; 
            
            let initialBubble = document.createElement("div");
            initialBubble.className = "bubble other";
            initialBubble.innerHTML = `Halo, saya ${activeKonselorName}. Saya siap mendengarkan. Apa yang ingin Anda bicarakan hari ini?`;
            box.appendChild(initialBubble);
            box.scrollTop = box.scrollHeight;

            document.getElementById("selectCounselor").style.display = 'none';
            document.getElementById("chatInterface").style.display = 'flex'; 
            
            document.getElementById("msg").focus();
        };

        window.sendMsg = function() {
            let text = document.getElementById("msg").value;
            if (text.trim() === "") return;

            let box = document.getElementById("chatBox");

            // 1. Pesan Pengguna
            let userBubble = document.createElement("div");
            userBubble.className = "bubble me";
            userBubble.innerText = text;
            box.appendChild(userBubble);
            box.scrollTop = box.scrollHeight;

            document.getElementById("msg").value = "";
            document.getElementById("msg").focus();

            // 2. Respon Konselor (Simulasi)
            let lower = text.toLowerCase();
            let reply = "";
            const konselorName = activeKonselorName || document.getElementById("konselorName").innerText;

            for (let key in responses) {
                if (lower.includes(key)) {
                    reply = responses[key];
                    break;
                }
            }

            if (reply === "") {
                reply = "Terima kasih atas sharingnya. Bisakah Anda jelaskan lebih detail tentang (perasaan) yang timbul dari situasi tersebut? Ceritakan lebih banyak agar saya bisa memahami.";
            }

            setTimeout(() => {
                let botBubble = document.createElement("div");
                botBubble.className = "bubble other";
                botBubble.innerHTML = `${konselorName}: ${reply}`;
                box.appendChild(botBubble);

                box.scrollTop = box.scrollHeight;
            }, 900); 
        };

        window.simulateCall = function(type) {
            const currentKonselorName = activeKonselorName || document.getElementById("konselorName").innerText;
            
            if(currentKonselorName === ""){
                alert("Harap pilih konselor terlebih dahulu!");
                return;
            }
            alert(`Simulasi ${type} ke ${currentKonselorName} akan segera dimulai. (Fitur ini hanya simulasi tampilan)`);
        };
        
        // --- EVENT LISTENERS INITIALIZATION ---
        document.addEventListener('DOMContentLoaded', () => {
            setupTabs();
            
            // Finance Zone Listeners
            document.getElementById('calcBudget').addEventListener('click', calculateBudget);
            document.getElementById('addExp').addEventListener('click', window.addExpense);
            document.getElementById('resetBudget').addEventListener('click', resetBudget);

            // Inisialisasi Finance Zone
            calculateBudget();
            renderExpenses();
            renderCareerLists();
        });
        
        // =========================================
        // === BAGIAN JAVASCRIPT END ===
        // =========================================
    </script>
</body>
</html>